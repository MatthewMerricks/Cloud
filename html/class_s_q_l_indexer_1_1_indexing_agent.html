<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Cloud Windows Client: SQLIndexer.IndexingAgent Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Cloud Windows Client
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Events</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_s_q_l_indexer.html">SQLIndexer</a></li><li class="navelem"><a class="el" href="class_s_q_l_indexer_1_1_indexing_agent.html">IndexingAgent</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="class_s_q_l_indexer_1_1_indexing_agent-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">SQLIndexer.IndexingAgent Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for SQLIndexer.IndexingAgent:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_s_q_l_indexer_1_1_indexing_agent.png" usemap="#SQLIndexer.IndexingAgent_map" alt=""/>
  <map id="SQLIndexer.IndexingAgent_map" name="SQLIndexer.IndexingAgent_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad2d6710dde71ef03a1df6790ec05efbb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_cloud_api_public_1_1_model_1_1_c_l_error.html">CLError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_q_l_indexer_1_1_indexing_agent.html#ad2d6710dde71ef03a1df6790ec05efbb">StartInitialIndexing</a> (Action&lt; IEnumerable&lt; KeyValuePair&lt; <a class="el" href="class_cloud_api_public_1_1_model_1_1_file_path.html">FilePath</a>, <a class="el" href="class_cloud_api_public_1_1_model_1_1_file_metadata.html">FileMetadata</a> &gt;&gt;, IEnumerable&lt; <a class="el" href="class_cloud_api_public_1_1_model_1_1_file_change.html">FileChange</a> &gt;&gt; indexCompletionCallback, Func&lt; string &gt; getPath)</td></tr>
<tr class="memdesc:ad2d6710dde71ef03a1df6790ec05efbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the indexing process on an indexing agent which will resolve the last events and changes to the file system since the last time the file monitor was running to produce the initial in-memory index and changes to process, spins off a user work thread for the actual processing and returns immediately  <a href="#ad2d6710dde71ef03a1df6790ec05efbb"></a><br/></td></tr>
<tr class="separator:ad2d6710dde71ef03a1df6790ec05efbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a478bbca60eef0a27fd51cae58e97f449"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_cloud_api_public_1_1_model_1_1_c_l_error.html">CLError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_q_l_indexer_1_1_indexing_agent.html#a478bbca60eef0a27fd51cae58e97f449">GetLastSyncStates</a> (out FilePathDictionary&lt; <a class="el" href="class_s_q_l_indexer_1_1_synced_object.html">SyncedObject</a> &gt; syncStates)</td></tr>
<tr class="memdesc:a478bbca60eef0a27fd51cae58e97f449"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the complete file system state at the time of the last sync  <a href="#a478bbca60eef0a27fd51cae58e97f449"></a><br/></td></tr>
<tr class="separator:a478bbca60eef0a27fd51cae58e97f449"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8703b7fb5c325aae121a3af475b59d3e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8703b7fb5c325aae121a3af475b59d3e"></a>
<a class="el" href="class_cloud_api_public_1_1_model_1_1_c_l_error.html">CLError</a>&#160;</td><td class="memItemRight" valign="bottom"><b>GetMetadataByPathAndRevision</b> (string path, string revision, out <a class="el" href="class_cloud_api_public_1_1_model_1_1_file_metadata.html">FileMetadata</a> metadata)</td></tr>
<tr class="separator:a8703b7fb5c325aae121a3af475b59d3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a342cf10c5fea7b2111ccb518fe66872f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_cloud_api_public_1_1_model_1_1_c_l_error.html">CLError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_q_l_indexer_1_1_indexing_agent.html#a342cf10c5fea7b2111ccb518fe66872f">GetPendingEvents</a> (out List&lt; KeyValuePair&lt; <a class="el" href="class_cloud_api_public_1_1_model_1_1_file_path.html">FilePath</a>, <a class="el" href="class_cloud_api_public_1_1_model_1_1_file_change.html">FileChange</a> &gt;&gt; changeEvents)</td></tr>
<tr class="memdesc:a342cf10c5fea7b2111ccb518fe66872f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves all unprocessed events that occurred since the last sync  <a href="#a342cf10c5fea7b2111ccb518fe66872f"></a><br/></td></tr>
<tr class="separator:a342cf10c5fea7b2111ccb518fe66872f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a489c3baaa8767cdf899e609359c7cd8b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_cloud_api_public_1_1_model_1_1_c_l_error.html">CLError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_q_l_indexer_1_1_indexing_agent.html#a489c3baaa8767cdf899e609359c7cd8b">AddEvents</a> (IEnumerable&lt; <a class="el" href="class_cloud_api_public_1_1_model_1_1_file_change.html">FileChange</a> &gt; newEvents, bool alreadyObtainedLock=false)</td></tr>
<tr class="memdesc:a489c3baaa8767cdf899e609359c7cd8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds an unprocessed change since the last sync as a new event to the database, EventId property of the input event is set after database update  <a href="#a489c3baaa8767cdf899e609359c7cd8b"></a><br/></td></tr>
<tr class="separator:a489c3baaa8767cdf899e609359c7cd8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a32ee8c464595e0197454864a7906bf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_cloud_api_public_1_1_model_1_1_c_l_error.html">CLError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_q_l_indexer_1_1_indexing_agent.html#a1a32ee8c464595e0197454864a7906bf">RemoveEventById</a> (long eventId)</td></tr>
<tr class="memdesc:a1a32ee8c464595e0197454864a7906bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a single event by its id  <a href="#a1a32ee8c464595e0197454864a7906bf"></a><br/></td></tr>
<tr class="separator:a1a32ee8c464595e0197454864a7906bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0ee0c07cb93cbff7d1a162e769e5bcb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_cloud_api_public_1_1_model_1_1_c_l_error.html">CLError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_q_l_indexer_1_1_indexing_agent.html#af0ee0c07cb93cbff7d1a162e769e5bcb">RemoveEventsByIds</a> (IEnumerable&lt; long &gt; eventIds, bool alreadyObtainedLock=false)</td></tr>
<tr class="memdesc:af0ee0c07cb93cbff7d1a162e769e5bcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a collection of events by their ids  <a href="#af0ee0c07cb93cbff7d1a162e769e5bcb"></a><br/></td></tr>
<tr class="separator:af0ee0c07cb93cbff7d1a162e769e5bcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa342de5c56708d670c140e28c1d88b2e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_cloud_api_public_1_1_model_1_1_c_l_error.html">CLError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_q_l_indexer_1_1_indexing_agent.html#aa342de5c56708d670c140e28c1d88b2e">RecordCompletedSync</a> (string syncId, IEnumerable&lt; long &gt; syncedEventIds, out long syncCounter, <a class="el" href="class_cloud_api_public_1_1_model_1_1_file_path.html">FilePath</a> newRootPath=null)</td></tr>
<tr class="memdesc:aa342de5c56708d670c140e28c1d88b2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a new set of sync states to the database after a sync completes, requires newRootPath to be set on the first sync or on any sync with a new root path  <a href="#aa342de5c56708d670c140e28c1d88b2e"></a><br/></td></tr>
<tr class="separator:aa342de5c56708d670c140e28c1d88b2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e877202d8e8b88ef44dface6830a3bf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_cloud_api_public_1_1_model_1_1_c_l_error.html">CLError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_q_l_indexer_1_1_indexing_agent.html#a6e877202d8e8b88ef44dface6830a3bf">RecordCompletedSync</a> (string syncId, IEnumerable&lt; long &gt; syncedEventIds, out long syncCounter, string newRootPath=null)</td></tr>
<tr class="memdesc:a6e877202d8e8b88ef44dface6830a3bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a new set of sync states to the database after a sync completes, requires newRootPath to be set on the first sync or on any sync with a new root path  <a href="#a6e877202d8e8b88ef44dface6830a3bf"></a><br/></td></tr>
<tr class="separator:a6e877202d8e8b88ef44dface6830a3bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa10b36b9256080cb81eb55af2bf6f64"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_cloud_api_public_1_1_model_1_1_c_l_error.html">CLError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_q_l_indexer_1_1_indexing_agent.html#aaa10b36b9256080cb81eb55af2bf6f64">WipeIndex</a> (string newRootPath)</td></tr>
<tr class="memdesc:aaa10b36b9256080cb81eb55af2bf6f64"><td class="mdescLeft">&#160;</td><td class="mdescRight">¡¡ Call this carefully, completely wipes index database (use when user deletes local repository or relinks) !!  <a href="#aaa10b36b9256080cb81eb55af2bf6f64"></a><br/></td></tr>
<tr class="separator:aaa10b36b9256080cb81eb55af2bf6f64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a2d5f1f72d626f15a60e925edcdb80f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_cloud_api_public_1_1_model_1_1_c_l_error.html">CLError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_q_l_indexer_1_1_indexing_agent.html#a2a2d5f1f72d626f15a60e925edcdb80f">MergeEventsIntoDatabase</a> (IEnumerable&lt; <a class="el" href="struct_cloud_api_public_1_1_model_1_1_file_change_merge.html">FileChangeMerge</a> &gt; mergeToFroms, bool alreadyObtainedLock=false)</td></tr>
<tr class="memdesc:a2a2d5f1f72d626f15a60e925edcdb80f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to merge event into database, used when events are modified or replaced with new events  <a href="#a2a2d5f1f72d626f15a60e925edcdb80f"></a><br/></td></tr>
<tr class="separator:a2a2d5f1f72d626f15a60e925edcdb80f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c6482c347eb75314c0869e3aa5d9458"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_cloud_api_public_1_1_model_1_1_c_l_error.html">CLError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_q_l_indexer_1_1_indexing_agent.html#a9c6482c347eb75314c0869e3aa5d9458">MarkEventAsCompletedOnPreviousSync</a> (long eventId)</td></tr>
<tr class="memdesc:a9c6482c347eb75314c0869e3aa5d9458"><td class="mdescLeft">&#160;</td><td class="mdescRight">Includes an event in the last set of sync states, or in other words processes it as complete (event will no longer be included in GetEventsSinceLastSync)  <a href="#a9c6482c347eb75314c0869e3aa5d9458"></a><br/></td></tr>
<tr class="separator:a9c6482c347eb75314c0869e3aa5d9458"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae77c8a49cfc1b4494054b8c3f797b745"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae77c8a49cfc1b4494054b8c3f797b745"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>Dispose</b> ()</td></tr>
<tr class="separator:ae77c8a49cfc1b4494054b8c3f797b745"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a5ef1a7410b870970331986996efadcd6"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_cloud_api_public_1_1_model_1_1_c_l_error.html">CLError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_q_l_indexer_1_1_indexing_agent.html#a5ef1a7410b870970331986996efadcd6">CreateNewAndInitialize</a> (out <a class="el" href="class_s_q_l_indexer_1_1_indexing_agent.html">IndexingAgent</a> newIndexer)</td></tr>
<tr class="memdesc:a5ef1a7410b870970331986996efadcd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates the SQL indexing service and outputs it, must be started afterwards with StartInitialIndexing  <a href="#a5ef1a7410b870970331986996efadcd6"></a><br/></td></tr>
<tr class="separator:a5ef1a7410b870970331986996efadcd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a911db9610dda4cdc8fb2b361ccf40ffc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a911db9610dda4cdc8fb2b361ccf40ffc"></a>
readonly ReaderWriterLockSlim&#160;</td><td class="memItemRight" valign="bottom"><b>CELocker</b> = new ReaderWriterLockSlim()</td></tr>
<tr class="separator:a911db9610dda4cdc8fb2b361ccf40ffc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65b1f9bbee5d85e40d16fd91ee5df623"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a65b1f9bbee5d85e40d16fd91ee5df623"></a>
readonly ReaderWriterLockSlim&#160;</td><td class="memItemRight" valign="bottom"><b>LastSyncLocker</b> = new ReaderWriterLockSlim()</td></tr>
<tr class="separator:a65b1f9bbee5d85e40d16fd91ee5df623"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:a28454d94bac1c6abe5e7ece3b56c8b00"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_q_l_indexer_1_1_indexing_agent.html#a28454d94bac1c6abe5e7ece3b56c8b00">LastSyncId</a><code> [get, set]</code></td></tr>
<tr class="memdesc:a28454d94bac1c6abe5e7ece3b56c8b00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store the last Sync Id, starts null before indexing; lock on the <a class="el" href="class_s_q_l_indexer_1_1_indexing_agent.html">IndexingAgent</a> instance for all reads/writes  <a href="#a28454d94bac1c6abe5e7ece3b56c8b00"></a><br/></td></tr>
<tr class="separator:a28454d94bac1c6abe5e7ece3b56c8b00"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a489c3baaa8767cdf899e609359c7cd8b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_cloud_api_public_1_1_model_1_1_c_l_error.html">CLError</a> SQLIndexer.IndexingAgent.AddEvents </td>
          <td>(</td>
          <td class="paramtype">IEnumerable&lt; <a class="el" href="class_cloud_api_public_1_1_model_1_1_file_change.html">FileChange</a> &gt;&#160;</td>
          <td class="paramname"><em>newEvents</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>alreadyObtainedLock</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds an unprocessed change since the last sync as a new event to the database, EventId property of the input event is set after database update </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newEvents</td><td>Change to add</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns error that occurred when adding the event to database, if any</dd></dl>

</div>
</div>
<a class="anchor" id="a5ef1a7410b870970331986996efadcd6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="class_cloud_api_public_1_1_model_1_1_c_l_error.html">CLError</a> SQLIndexer.IndexingAgent.CreateNewAndInitialize </td>
          <td>(</td>
          <td class="paramtype">out <a class="el" href="class_s_q_l_indexer_1_1_indexing_agent.html">IndexingAgent</a>&#160;</td>
          <td class="paramname"><em>newIndexer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates the SQL indexing service and outputs it, must be started afterwards with StartInitialIndexing </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newIndexer</td><td>Output indexing agent</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the error that occurred during creation, if any</dd></dl>

</div>
</div>
<a class="anchor" id="a478bbca60eef0a27fd51cae58e97f449"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_cloud_api_public_1_1_model_1_1_c_l_error.html">CLError</a> SQLIndexer.IndexingAgent.GetLastSyncStates </td>
          <td>(</td>
          <td class="paramtype">out FilePathDictionary&lt; <a class="el" href="class_s_q_l_indexer_1_1_synced_object.html">SyncedObject</a> &gt;&#160;</td>
          <td class="paramname"><em>syncStates</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the complete file system state at the time of the last sync </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">syncStates</td><td>Outputs the file system state</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns an error that occurred retrieving the file system state, if any</dd></dl>

</div>
</div>
<a class="anchor" id="a342cf10c5fea7b2111ccb518fe66872f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_cloud_api_public_1_1_model_1_1_c_l_error.html">CLError</a> SQLIndexer.IndexingAgent.GetPendingEvents </td>
          <td>(</td>
          <td class="paramtype">out List&lt; KeyValuePair&lt; <a class="el" href="class_cloud_api_public_1_1_model_1_1_file_path.html">FilePath</a>, <a class="el" href="class_cloud_api_public_1_1_model_1_1_file_change.html">FileChange</a> &gt;&gt;&#160;</td>
          <td class="paramname"><em>changeEvents</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves all unprocessed events that occurred since the last sync </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">changeEvents</td><td>Outputs the unprocessed events</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns an error that occurred filling the unprocessed events, if any</dd></dl>

</div>
</div>
<a class="anchor" id="a9c6482c347eb75314c0869e3aa5d9458"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_cloud_api_public_1_1_model_1_1_c_l_error.html">CLError</a> SQLIndexer.IndexingAgent.MarkEventAsCompletedOnPreviousSync </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>eventId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Includes an event in the last set of sync states, or in other words processes it as complete (event will no longer be included in GetEventsSinceLastSync) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">eventId</td><td>Primary key value of the event to process</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns an error that occurred marking the event complete, if any</dd></dl>

</div>
</div>
<a class="anchor" id="a2a2d5f1f72d626f15a60e925edcdb80f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_cloud_api_public_1_1_model_1_1_c_l_error.html">CLError</a> SQLIndexer.IndexingAgent.MergeEventsIntoDatabase </td>
          <td>(</td>
          <td class="paramtype">IEnumerable&lt; <a class="el" href="struct_cloud_api_public_1_1_model_1_1_file_change_merge.html">FileChangeMerge</a> &gt;&#160;</td>
          <td class="paramname"><em>mergeToFroms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>alreadyObtainedLock</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Method to merge event into database, used when events are modified or replaced with new events </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mergedEvent</td><td>Event with latest file or folder metadata, pass null to only delete the old event</td></tr>
    <tr><td class="paramname">eventToRemove</td><td>Previous event to set if an old event is being replaced in the process</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns an error from merging the events, if any</dd></dl>

</div>
</div>
<a class="anchor" id="aa342de5c56708d670c140e28c1d88b2e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_cloud_api_public_1_1_model_1_1_c_l_error.html">CLError</a> SQLIndexer.IndexingAgent.RecordCompletedSync </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>syncId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IEnumerable&lt; long &gt;&#160;</td>
          <td class="paramname"><em>syncedEventIds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">out long&#160;</td>
          <td class="paramname"><em>syncCounter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cloud_api_public_1_1_model_1_1_file_path.html">FilePath</a>&#160;</td>
          <td class="paramname"><em>newRootPath</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes a new set of sync states to the database after a sync completes, requires newRootPath to be set on the first sync or on any sync with a new root path </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">syncId</td><td>New sync Id from server</td></tr>
    <tr><td class="paramname">syncedEventIds</td><td>Enumerable of event ids processed in sync</td></tr>
    <tr><td class="paramname">syncCounter</td><td>Output sync counter local identity</td></tr>
    <tr><td class="paramname">newRootPath</td><td>Optional new root path for location of sync root, must be set on first sync</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns an error that occurred during recording the sync, if any</dd></dl>

</div>
</div>
<a class="anchor" id="a6e877202d8e8b88ef44dface6830a3bf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_cloud_api_public_1_1_model_1_1_c_l_error.html">CLError</a> SQLIndexer.IndexingAgent.RecordCompletedSync </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>syncId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IEnumerable&lt; long &gt;&#160;</td>
          <td class="paramname"><em>syncedEventIds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">out long&#160;</td>
          <td class="paramname"><em>syncCounter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>newRootPath</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes a new set of sync states to the database after a sync completes, requires newRootPath to be set on the first sync or on any sync with a new root path </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">syncId</td><td>New sync Id from server</td></tr>
    <tr><td class="paramname">syncedEventIds</td><td>Enumerable of event ids processed in sync</td></tr>
    <tr><td class="paramname">syncCounter</td><td>Output sync counter local identity</td></tr>
    <tr><td class="paramname">newRootPath</td><td>Optional new root path for location of sync root, must be set on first sync</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns an error that occurred during recording the sync, if any</dd></dl>

</div>
</div>
<a class="anchor" id="a1a32ee8c464595e0197454864a7906bf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_cloud_api_public_1_1_model_1_1_c_l_error.html">CLError</a> SQLIndexer.IndexingAgent.RemoveEventById </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>eventId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Removes a single event by its id </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">eventId</td><td>Id of event to remove</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns an error in removing the event, if any</dd></dl>

</div>
</div>
<a class="anchor" id="af0ee0c07cb93cbff7d1a162e769e5bcb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_cloud_api_public_1_1_model_1_1_c_l_error.html">CLError</a> SQLIndexer.IndexingAgent.RemoveEventsByIds </td>
          <td>(</td>
          <td class="paramtype">IEnumerable&lt; long &gt;&#160;</td>
          <td class="paramname"><em>eventIds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>alreadyObtainedLock</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Removes a collection of events by their ids </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">eventIds</td><td>Ids of events to remove</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns an error in removing events, if any</dd></dl>

</div>
</div>
<a class="anchor" id="ad2d6710dde71ef03a1df6790ec05efbb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_cloud_api_public_1_1_model_1_1_c_l_error.html">CLError</a> SQLIndexer.IndexingAgent.StartInitialIndexing </td>
          <td>(</td>
          <td class="paramtype">Action&lt; IEnumerable&lt; KeyValuePair&lt; <a class="el" href="class_cloud_api_public_1_1_model_1_1_file_path.html">FilePath</a>, <a class="el" href="class_cloud_api_public_1_1_model_1_1_file_metadata.html">FileMetadata</a> &gt;&gt;, IEnumerable&lt; <a class="el" href="class_cloud_api_public_1_1_model_1_1_file_change.html">FileChange</a> &gt;&gt;&#160;</td>
          <td class="paramname"><em>indexCompletionCallback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Func&lt; string &gt;&#160;</td>
          <td class="paramname"><em>getPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Starts the indexing process on an indexing agent which will resolve the last events and changes to the file system since the last time the file monitor was running to produce the initial in-memory index and changes to process, spins off a user work thread for the actual processing and returns immediately </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">indexCompletionCallback</td><td><a class="el" href="namespace_file_monitor.html">FileMonitor</a> method to call upon completion of the index (should trigger normal processing of file events)</td></tr>
    <tr><td class="paramname">getPath</td><td><a class="el" href="namespace_file_monitor.html">FileMonitor</a> method which returns the path to be indexed (so that the indexing and monitor are tied together)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns an error that occurred during startup, if any</dd></dl>

</div>
</div>
<a class="anchor" id="aaa10b36b9256080cb81eb55af2bf6f64"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_cloud_api_public_1_1_model_1_1_c_l_error.html">CLError</a> SQLIndexer.IndexingAgent.WipeIndex </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>newRootPath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>¡¡ Call this carefully, completely wipes index database (use when user deletes local repository or relinks) !! </p>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

</div>
</div>
<h2 class="groupheader">Property Documentation</h2>
<a class="anchor" id="a28454d94bac1c6abe5e7ece3b56c8b00"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string SQLIndexer.IndexingAgent.LastSyncId</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">set</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Store the last Sync Id, starts null before indexing; lock on the <a class="el" href="class_s_q_l_indexer_1_1_indexing_agent.html">IndexingAgent</a> instance for all reads/writes </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>CloudApiPublic/SQLIndexer/IndexingAgent.cs</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 26 2012 15:01:45 for Cloud Windows Client by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
